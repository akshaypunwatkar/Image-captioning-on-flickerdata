
<!DOCTYPE html>
<html>
  <head>
      <meta charset="UTF-8">
      <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/CG.css')}}">
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
      <title>Caption Generator</title>
      <script src="{{ url_for('static', filename='js/main.js') }}" type="text/javascript"></script>

  </head>

  <body>

    <div class="hero-unit">
    <div class="hero-unit__background-image">
    </div>
    </div>

    <div class="main-card">
      <img id="logo" src = "/static/camera.png">
      <h3 id="main-heading">Caption Generator</h3>

      <p class = "desc-text">Add Caption to any image!</p>

      <p class = "desc-text">To get started click on the "Choose File" button and  upload a file</p>

      <form id="upload-file" method="post" enctype="multipart/form-data">
          <label for="file" >
              Choose a file to upload
          </label>
          <input type="file" name="file" id="file" accept=".png, .jpg, .jpeg">
      </form>
      <div class="image-section" style="display:none;">
        <p id="file-name">No file uploaded</p>

          <div class="img-preview">
              <div id="imagePreview">
              </div>
          </div>
          <div>
              <button type="button" id="btn-predict">Generate Caption!</button>
          </div>
      </div>
      <div class="loader" style="display:none;"></div>

      <h3 id="result">
          <span> </span>
      </h3>

    </div>
      <script>
      const fileInput = document.querySelector('#file');
      const fileName = document.querySelector('#file-name');

      fileInput.addEventListener('change', updateFileName);

      function updateFileName() {

        let curFiles = fileInput.files;

        if(!(curFiles.length === 0))  {
            console.log('test');
            fileName.innerHTML = 'File name: ' + curFiles[0].name + '; file size ' + returnFileSize(curFiles[0].size) + '.';
        }
      }

      function returnFileSize(number) {
        if(number < 1024) {
          return number + 'bytes';
        } else if(number >= 1024 && number < 1048576) {
          return (number/1024).toFixed(1) + 'KB';
        } else if(number >= 1048576) {
          return (number/1048576).toFixed(1) + 'MB';
        }
      }

      </script>
</html>
